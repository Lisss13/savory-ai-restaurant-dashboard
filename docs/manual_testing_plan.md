# План ручного тестирования Savory AI Dashboard

## Подготовка к тестированию

### Требования
- [ ] Бэкенд запущен и доступен по `NEXT_PUBLIC_API_URL`
- [ ] База данных содержит тестовые данные
- [ ] Есть учётные данные для разных ролей (Admin, Owner, Manager, Staff)

### Запуск приложения
```bash
npm run dev
# или
docker compose up --build
```

---

## 1. Авторизация и аутентификация

### 1.1 Вход в систему (`/login`)
- [ ] Страница отображается корректно
- [ ] Валидация пустых полей (email, пароль)
- [ ] Валидация формата email
- [ ] Ошибка при неверных учётных данных
- [ ] Успешный вход с редиректом на `/dashboard`
- [ ] JWT токен сохраняется в localStorage
- [ ] После входа в header отображается имя пользователя

### 1.2 Регистрация (`/register`)
- [ ] Форма регистрации отображается
- [ ] Валидация всех обязательных полей
- [ ] Валидация совпадения паролей
- [ ] Успешная регистрация создаёт пользователя
- [ ] Редирект на страницу входа после регистрации

### 1.3 Восстановление пароля (`/forgot-password`)
- [ ] Форма запроса восстановления отображается
- [ ] Валидация email
- [ ] Успешная отправка показывает сообщение

### 1.4 Сброс пароля (`/reset-password`)
- [ ] Форма сброса отображается при наличии токена
- [ ] Валидация нового пароля
- [ ] Успешный сброс с редиректом на вход

### 1.5 Выход из системы
- [ ] Кнопка выхода в header/sidebar работает
- [ ] Токен удаляется из localStorage
- [ ] Редирект на `/login`
- [ ] Защищённые страницы недоступны после выхода

---

## 2. Главная страница (`/dashboard`)

### 2.1 Отображение
- [ ] Sidebar отображается и навигация работает
- [ ] Header с выбором ресторана (если несколько)
- [ ] Статистика загружается и отображается
- [ ] Карточки с метриками показывают данные

### 2.2 Выбор ресторана (Header)
- [ ] Dropdown появляется при наличии нескольких ресторанов
- [ ] Выбор ресторана сохраняется
- [ ] Данные обновляются при смене ресторана

---

## 3. Рестораны (`/dashboard/restaurants`)

### 3.1 Список ресторанов
- [ ] Таблица/список ресторанов загружается
- [ ] Отображается название, адрес, статус
- [ ] Кнопки редактирования/удаления работают
- [ ] Кнопка создания нового ресторана

### 3.2 Создание ресторана (`/dashboard/restaurants/new`)
- [ ] Форма создания отображается
- [ ] Валидация обязательных полей (название, адрес)
- [ ] Успешное создание с редиректом в список
- [ ] Toast уведомление об успехе

### 3.3 Редактирование ресторана (`/dashboard/restaurants/[id]/edit`)
- [ ] Данные ресторана загружаются в форму
- [ ] Изменения сохраняются
- [ ] Валидация работает

### 3.4 Удаление ресторана
- [ ] Диалог подтверждения появляется
- [ ] Удаление происходит после подтверждения
- [ ] Список обновляется

---

## 4. Меню

### 4.1 Категории меню (`/dashboard/menu/categories`)
- [ ] Список категорий загружается
- [ ] Создание новой категории
- [ ] Редактирование категории
- [ ] Удаление категории
- [ ] **Drag-and-drop сортировка работает**
- [ ] Порядок сохраняется после перетаскивания
- [ ] Порядок сохраняется после обновления страницы

### 4.2 Список блюд (`/dashboard/menu/dishes`)
- [ ] Таблица блюд загружается
- [ ] Фильтрация по категории
- [ ] Поиск по названию
- [ ] Отображается цена, описание, статус

### 4.3 Создание блюда (`/dashboard/menu/dishes/new`)
- [ ] Форма создания отображается
- [ ] Выбор категории из dropdown
- [ ] Валидация полей (название, цена)
- [ ] Загрузка изображения (если есть)
- [ ] Успешное создание

### 4.4 Редактирование блюда (`/dashboard/menu/dishes/[id]`)
- [ ] Данные блюда загружаются
- [ ] Изменения сохраняются
- [ ] Можно изменить категорию

---

## 5. Столы (`/dashboard/tables`)

### 5.1 Управление столами
- [ ] Список столов отображается
- [ ] Создание нового стола
- [ ] Редактирование стола (номер, вместимость)
- [ ] Удаление стола
- [ ] Отображается статус стола (свободен/занят)

---

## 6. Бронирования

### 6.1 Список бронирований (`/dashboard/reservations/list`)
- [ ] Таблица бронирований загружается
- [ ] Фильтрация по дате
- [ ] Фильтрация по статусу
- [ ] Поиск по имени гостя
- [ ] Кнопки изменения статуса работают

### 6.2 Календарь (`/dashboard/reservations/calendar`)
- [ ] Календарь отображается
- [ ] Бронирования видны на календаре
- [ ] Переключение между днями/неделями/месяцами
- [ ] Клик на бронирование открывает детали

### 6.3 Детали бронирования (`/dashboard/reservations/[id]`)
- [ ] Информация о бронировании загружается
- [ ] Можно изменить статус
- [ ] Можно отменить бронирование
- [ ] История изменений (если есть)

---

## 7. Чаты

### 7.1 Активные чаты (`/dashboard/chats/active`)
- [ ] Список активных чатов загружается
- [ ] Отображается имя гостя, последнее сообщение
- [ ] Клик открывает чат

### 7.2 История чатов (`/dashboard/chats/history`)
- [ ] Архивные чаты отображаются
- [ ] Фильтрация по дате
- [ ] Поиск работает

### 7.3 Просмотр чата (`/dashboard/chats/[sessionId]`)
- [ ] Сообщения загружаются
- [ ] Скролл к последним сообщениям
- [ ] Отображаются сообщения пользователя и AI
- [ ] Можно отправить сообщение от оператора (если предусмотрено)

---

## 8. Быстрые вопросы (`/dashboard/questions`)

### 8.1 Управление вопросами
- [ ] Список вопросов загружается
- [ ] Создание нового вопроса
- [ ] Редактирование вопроса и ответа
- [ ] Удаление вопроса
- [ ] **Drag-and-drop сортировка работает**
- [ ] Порядок сохраняется после перетаскивания
- [ ] Порядок сохраняется после обновления страницы

---

## 9. QR-коды (`/dashboard/qr-codes`)

### 9.1 Генерация QR-кодов
- [ ] Страница отображается
- [ ] Выбор типа QR-кода (меню, бронирование)
- [ ] QR-код генерируется
- [ ] Можно скачать QR-код

---

## 10. Аналитика

### 10.1 Обзор (`/dashboard/analytics/overview`)
- [ ] Графики загружаются
- [ ] Фильтрация по периоду
- [ ] Данные соответствуют выбранному периоду

### 10.2 Аналитика бронирований (`/dashboard/analytics/reservations`)
- [ ] Статистика бронирований отображается
- [ ] Графики работают
- [ ] Фильтры применяются

### 10.3 Аналитика чатов (`/dashboard/analytics/chats`)
- [ ] Статистика чатов отображается
- [ ] Количество сессий, сообщений
- [ ] Графики активности

---

## 11. Команда (`/dashboard/team`)

### 11.1 Управление сотрудниками
- [ ] Список сотрудников загружается
- [ ] Добавление нового сотрудника
- [ ] Назначение роли
- [ ] Редактирование сотрудника
- [ ] Удаление/деактивация сотрудника
- [ ] Права доступа соответствуют роли

---

## 12. Настройки

### 12.1 Профиль (`/dashboard/settings/profile`)
- [ ] Данные профиля загружаются
- [ ] Можно изменить имя, email
- [ ] Можно изменить пароль
- [ ] Изменения сохраняются

### 12.2 Организация (`/dashboard/settings/organization`)
- [ ] Данные организации загружаются
- [ ] Можно изменить название, контакты
- [ ] Изменения сохраняются

### 12.3 Языки (`/dashboard/settings/languages`)
- [ ] Список поддерживаемых языков
- [ ] Можно добавить/удалить язык
- [ ] Переключение языка работает

### 12.4 Подписка (`/dashboard/settings/subscription`)
- [ ] Информация о подписке отображается
- [ ] Текущий тариф виден
- [ ] Можно перейти к оплате/смене тарифа

### 12.5 Поддержка (`/dashboard/settings/support`)
- [ ] Форма создания тикета отображается
- [ ] Валидация полей
- [ ] Тикет создаётся успешно
- [ ] Список тикетов отображается
- [ ] Можно просмотреть детали тикета

---

## 13. Админ-панель (только для Admin)

### 13.1 Статистика (`/dashboard/admin`)
- [ ] Общая статистика системы
- [ ] Количество организаций, пользователей

### 13.2 Пользователи (`/dashboard/admin/users`)
- [ ] Список всех пользователей
- [ ] Фильтрация по роли
- [ ] Редактирование пользователя
- [ ] Блокировка/разблокировка

### 13.3 Организации (`/dashboard/admin/organizations`)
- [ ] Список всех организаций
- [ ] Просмотр деталей
- [ ] Управление статусом

### 13.4 Модерация (`/dashboard/admin/moderation`)
- [ ] Контент для модерации
- [ ] Одобрение/отклонение

### 13.5 Логи (`/dashboard/admin/logs`)
- [ ] Системные логи отображаются
- [ ] Фильтрация по типу/дате
- [ ] Поиск работает

---

## 14. Общие проверки

### 14.1 UI/UX
- [ ] Все страницы имеют заголовки
- [ ] Breadcrumbs работают (если есть)
- [ ] Loading состояния отображаются
- [ ] Ошибки отображаются понятно
- [ ] Toast уведомления появляются
- [ ] Responsive дизайн (мобильная версия)

### 14.2 Навигация
- [ ] Sidebar сворачивается/разворачивается
- [ ] Все ссылки в sidebar работают
- [ ] Активный пункт меню подсвечивается
- [ ] Вложенные меню раскрываются

### 14.3 Безопасность
- [ ] Защищённые страницы недоступны без авторизации
- [ ] Редирект на `/login` при истечении токена
- [ ] Страницы админа недоступны для обычных пользователей
- [ ] Нет XSS уязвимостей в полях ввода

### 14.4 Производительность
- [ ] Страницы загружаются быстро (< 3 сек)
- [ ] Нет лишних запросов к API
- [ ] Кеширование работает (TanStack Query)
- [ ] Оптимистичные обновления работают

---

## Отчёт о тестировании

| Раздел | Всего тестов | Пройдено | Провалено | Заметки |
|--------|--------------|----------|-----------|---------|
| Авторизация | | | | |
| Главная | | | | |
| Рестораны | | | | |
| Меню | | | | |
| Столы | | | | |
| Бронирования | | | | |
| Чаты | | | | |
| Вопросы | | | | |
| QR-коды | | | | |
| Аналитика | | | | |
| Команда | | | | |
| Настройки | | | | |
| Админ-панель | | | | |
| Общие | | | | |

**Дата тестирования:** _______________

**Тестировщик:** _______________

**Версия приложения:** _______________

**Окружение:** _______________
